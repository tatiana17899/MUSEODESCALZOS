@model MuseoDescalzos.Controllers.DashboardViewModel
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<link
      href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css"
      rel="stylesheet"
    />
<link rel="stylesheet" href="~/css/indexAdmin.css" asp-append-version="true" />
<div class="content flex-grow-1" id="contenido">
        <div
          class="d-flex justify-content-between align-items-center mb-4"
        ></div>
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h1 class="h3">DASHBOARD</h1>
        </div>
        <div class="row mb-4">
          <div class="col-md-4 mb-3">
            <div class="card shadow">
              <div class="card-body d-flex align-items-center">
                <div class="display-4 me-3">@Model.CantidadAlquileres</div>
                <div>
                  <div class="text-muted">Cantidad de Ventas - Alquileres</div>
                  <i class="fa-solid fa-truck-ramp-box"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-3">
            <div class="card shadow">
              <div class="card-body d-flex align-items-center">
                <div class="display-4 me-3">@Model.CantidadVisitas</div>
                <div>
                  <div class="text-muted">Cantidad de Ventas - Visitas</div>
                  <i class="fas fa-map-marker-alt text-muted icon"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-3">
            <div class="card shadow">
              <div class="card-body d-flex align-items-center">
                <div class="display-4 me-3">@Model.CantidadEventos</div>
                <div>
                  <div class="text-muted">Cantidad de Ventas - Eventos</div>
                  <i class="fas fa-calendar-alt text-muted icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mb-4">
          <div class="col-md-6 mb-3">
            <div class="card shadow">
              <div class="card-body">
                <div class="d-flex align-items-center">
                  <h5 class="card-title me-3">
                    Análisis gráfico de las ventas
                  </h5>
                  <div class="input-group">
                    <input
                      type="date"
                      class="form-control"
                      id="fecha-seleccionada"
                    />
                    <label for="fecha-seleccionada" class="input-group-text">
                      <i class="fas fa-calendar-alt"></i>
                    </label>
                  </div>
                </div>
                <img
                  src="https://placehold.co/400x200"
                  alt="Graph showing sales analysis"
                  class="img-fluid"
                />
              </div>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="card shadow">
              <div class="card-body">
                <h5 class="card-title">Ventas de categorías</h5>
                <img
                  src="https://placehold.co/200x200"
                  alt="Pie chart showing sales categories"
                  class="img-fluid"
                />
                <div class="mt-3">
                  <div class="d-flex align-items-center mb-2">
                    <div
                      class="bg-danger rounded-circle me-2"
                      style="width: 16px; height: 16px"
                    ></div>
                    Visitas
                  </div>
                  <div class="d-flex align-items-center">
                    <div
                      class="bg-warning rounded-circle me-2"
                      style="width: 16px; height: 16px"
                    ></div>
                    Eventos
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title d-flex align-items-center">
              <i class="fas fa-history me-2"></i>Historial de Ventas
            </h5>
            <div class="d-flex align-items-center mb-3">
              <label>Fecha Inicio:</label>
              <input
                type="text"
                class="form-control me-2"
                placeholder="dd/mm/aa"
              />
              <label>Fecha Fin:</label>
              <input
                type="text"
                class="form-control me-2"
                placeholder="dd/mm/aa"
              />
              <select
                  class="form-select me-2"
                  aria-label="Default select example" id="tipoVenta"
                >
                  <option selected>Seleccionar venta</option>
                  <option value="visitas">Visitas</option>
                  <option value="eventos">Eventos</option>
                  <option value="alquileres">Alquileres</option>
                </select>
              <button class="btn btn-primary me-2">
                <i class="fa-solid fa-magnifying-glass"></i>Buscar
              </button>
              <button class="btn btn-success">
                <i class="fa-sharp fa-solid fa-file-excel"></i>Exportar
              </button>
            </div>
            <div id="tablaAtributos">
              
            </div>
            <div class="d-flex justify-content-between">
              <div>Mostrando de 1 a 6 de 6 registros</div>
              <div>
                <button class="btn btn-outline-secondary me-2">Anterior</button>
                <button class="btn btn-outline-secondary">Siguiente</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      const datosVentas = {
        alquileres: [
          { "N° Pedido": "A001", "Cliente": "Carlos Pérez", "Alquiler": "Sala A", "Fecha": "2024-09-05", "Hora Inicio": "10:00 AM", "Hora Fin": "12:00 PM", "Capacidad": 50, "Total": "$150" },
          { "N° Pedido": "A002", "Cliente": "María Gómez", "Alquiler": "Jardín", "Fecha": "2024-09-06", "Hora Inicio": "2:00 PM", "Hora Fin": "4:00 PM", "Capacidad": 100, "Total": "$300" },
          { "N° Pedido": "A003", "Cliente": "Pedro Sánchez", "Alquiler": "Sala B", "Fecha": "2024-09-07", "Hora Inicio": "3:00 PM", "Hora Fin": "5:00 PM", "Capacidad": 30, "Total": "$120" }
        ],
        visitas: [
          { "N° Visita": "V001", "Cliente": "Ana Martínez", "Detalle": "Visita guiada", "Cantidad": 3, "Guía": "Luis R.", "Precio/u": "$10", "Total": "$30" },
          { "N° Visita": "V002", "Cliente": "Jorge García", "Detalle": "Tour familiar", "Cantidad": 5, "Guía": "Carlos M.", "Precio/u": "$12", "Total": "$60" },
          { "N° Visita": "V003", "Cliente": "Laura Fernández", "Detalle": "Visita escolar", "Cantidad": 20, "Guía": "Sara T.", "Precio/u": "$8", "Total": "$160" }
        ],
        eventos: [
          { "N° Evento": "E001", "Cliente": "Roberto Díaz", "Evento": "Exposición de arte", "Detalle": "Presentación especial", "Cantidad": 1, "Precio/u": "$500", "Total": "$500" },
          { "N° Evento": "E002", "Cliente": "Sofía Ruiz", "Evento": "Concierto", "Detalle": "Música clásica", "Cantidad": 2, "Precio/u": "$250", "Total": "$500" },
          { "N° Evento": "E003", "Cliente": "José Navarro", "Evento": "Charla", "Detalle": "Historia del arte", "Cantidad": 1, "Precio/u": "$200", "Total": "$200" }
        ]
      };

      const columnasVenta = {
        alquileres: ["N° Pedido", "Cliente", "Alquiler", "Fecha", "Hora Inicio", "Hora Fin", "Capacidad", "Total"],
        visitas: ["N° Visita", "Cliente", "Detalle", "Cantidad", "Guía", "Precio/u", "Total"],
        eventos: ["N° Evento", "Cliente", "Evento", "Detalle", "Cantidad", "Precio/u", "Total"]
      };

      const tipoVentaSelect = document.getElementById("tipoVenta");
      const tablaAtributos = document.getElementById("tablaAtributos");

      function mostrarTabla(tipoVenta) {
        tablaAtributos.innerHTML = "";
        
        if (!tipoVenta || tipoVenta === "Seleccionar venta") {
          return;
        }

        const table = document.createElement("table");
        table.classList.add("table", "table-striped");

        const headerRow = table.insertRow();
        columnasVenta[tipoVenta].forEach(columna => {
          const headerCell = document.createElement("th");
          headerCell.textContent = columna;
          headerRow.appendChild(headerCell);
        });

        datosVentas[tipoVenta].forEach(venta => {
          const row = table.insertRow();
          columnasVenta[tipoVenta].forEach(columna => {
            const cell = row.insertCell();
            cell.textContent = venta[columna];
          });
        });

        tablaAtributos.appendChild(table);
      }

      tipoVentaSelect.addEventListener("change", () => {
        const tipoVenta = tipoVentaSelect.value;
        mostrarTabla(tipoVenta);
      });
    </script>
<script
      src="https://kit.fontawesome.com/5102c9fd0f.js"
      crossorigin="anonymous"
    ></script>

<script src="https://cdn.datatables.net/2.1.5/js/dataTables.min.js"></script>

